(function (a,b){var c=true,d={type:'get',cache:false,onreceive:function (){},dataType:'text',retryCount:3,error:function (){},username:false,password:false,refreshInterval:10000,xhr:false,url:''};b.PushPoller=function (p){var q=this,r=b.extend(true,{},d,p),n=null,t=0,u=false,v={},w=function (y,e){if (c){var y='['+Date()+'] - '+((y)?y.toString():'');if (a.console){if (console.warn&&e!='msg'){return console.warn(y);}else if (console.log){return console.log(y);}}return alert(y);}},z=function (){t++;if (t>r.retryCount){return j('error');}else {D();}},j=function (e){if (e=='abort'){w('Push Poller Aborted','msg');}else {w(e);w('running: '+u.toString());w('retries: '+t);}u=false;t=0;return r.error(e);},A=function (){t=0;D();},B=function (){b.ajax({url:'',dataType:'text',success:function (){A();}});},D=function (){u=true;if (n&&n.abort)n.abort();n=b.ajax(v);};q.initialize=function (){t=0;v={type:r.type,cache:r.cache,dataType:r.dataType,url:r.url,success:function (E){r.onreceive(E);A();},error:function (F,G){if (G==='timeout'){B();}else {z();}}};if (r.username)v.username=r.username;if (r.password)v.password=r.password;if (r.xhr)v.xhr=r.xhr;if (r.refreshInterval)v.timeout=r.refreshInterval;B();};q.abort=function (){u=false;if (n&&n.abort)n.abort();n=null;t=0;j('abort');};q.isOpen=function (){return (u==true&&n&&n.readyState&&n.readyState>0);};q.state=function (){return (n&&typeof n.readyState!='undefined')?n.readyState:0;};q.settings=function (p){if (p)v=b.extend(true,{},d,v,p);return v;};q._xhr=function (){return n;};q._retryCount=function (){return t;};};}(window,jQuery));