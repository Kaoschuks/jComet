function serialize(b){var c=function (d){var e=typeof d,f;var g;if (e=='object'&&!d){return 'null';}if (e=="object"){if (!d.constructor){return 'object';}var h=d.constructor.toString();f=h.match(/(\w+)\(/);if (f){h=f[1].toLowerCase();}var j=["boolean","number","string","array"];for (g in j){if (h==j[g]){e=j[g];break ;}}}return e;};var e=c(b);var k,l='';switch (e){case "function":k="";break ;case "boolean":k="b:"+(b?"1":"0");break ;case "number":k=(Math.round(b)==b?"i":"d")+":"+b;break ;case "string":b=this.utf8_encode(b);k="s:"+encodeURIComponent(b).replace(/%../g,'x').length+":\""+b+"\"";break ;case "array":case "object":k="a";var m=0;var n="";var o;var g;for (g in b){l=c(b[g]);if (l=="function"){continue ;}o=(g.match(/^[0-9]+$/)?parseInt(g,10):g);n+=this.serialize(o)+this.serialize(b[g]);m++;}k+=":"+m+":{"+n+"}";break ;case "undefined":default :k="N";break ;}if (e!="object"&&e!="array"){k+=";";}return k;}function unserialize(q){var r=this;var s=function (t){var u=t.charCodeAt(0);if (u<0x0080){return 0;}if (u<0x0800){return 1;}return 2;};var v=function (e,w,y,z){};var A=function (q,B,C){var D=[];var t=q.slice(B,B+1);var E=2;while (t!=C){if ((E+B)>q.length){v('Error','Invalid');}D.push(t);t=q.slice(B+(E-1),B+E);E+=1;}return [D.length,D.join('')];};var F=function (q,B,G){var D;D=[];for (var E=0;E<G;E++){var t=q.slice(B+(E-1),B+E);D.push(t);G-=s(t);}return [D.length,D.join('')];};var H=function (q,B){var I;var J;var K=0;var L;var M;var N;var O;if (!B){B=0;}var P=(q.slice(B,B+1)).toLowerCase();var Q=B+2;var R=function (S){return S;};switch (P){case 'i':R=function (S){return parseInt(S,10);};J=A(q,Q,';');K=J[0];I=J[1];Q+=K+1;break ;case 'b':R=function (S){return parseInt(S,10)!==0;};J=A(q,Q,';');K=J[0];I=J[1];Q+=K+1;break ;case 'd':R=function (S){return parseFloat(S);};J=A(q,Q,';');K=J[0];I=J[1];Q+=K+1;break ;case 'n':I=null;break ;case 's':L=A(q,Q,':');K=L[0];M=L[1];Q+=K+2;J=F(q,Q+1,parseInt(M,10));K=J[0];I=J[1];Q+=K+2;if (K!=parseInt(M,10)&&K!=I.length){v('SyntaxError','String length mismatch');}I=utf8_decode(I);break ;case 'a':I={};N=A(q,Q,':');K=N[0];O=N[1];Q+=K+2;for (var E=0;E<parseInt(O,10);E++){var T=H(q,Q);var U=T[1];var g=T[2];Q+=U;var V=H(q,Q);var W=V[1];var Y=V[2];Q+=W;I[g]=Y;}Q+=1;break ;default :v('SyntaxError','Unknown / Unhandled data type(s): '+P);break ;}return [P,Q-B,R(I)];};return H((q+''),0)[2];}